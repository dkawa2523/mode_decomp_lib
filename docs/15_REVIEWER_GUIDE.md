# レビューしやすさガイド（重要箇所が特定しやすい設計/実装）

本プロジェクトのレビュー観点は「正しさ」「比較可能性」「保守性」です。
非データサイエンティストの開発エンジニアが読みやすく、データサイエンティストが拡張しやすいことを重視します。

## レビューで最初に見るべき “重要箇所”
- **入口**: `src/.../run.py` / `src/.../pipeline.py`（Processの分岐とI/O）
- **契約**: `docs/00_INVARIANTS.md`, `docs/04_ARTIFACTS_AND_VERSIONING.md`
- **差し替え点**:
  - Decomposer（Stage 3）
  - CoeffPost（Stage 4）
  - Model（Stage 5）
  - Dataset/Domain（Stage 0-2）

## タスク実装時に必ず残す「レビュー用メモ」
各Taskの完了時に、タスクmd末尾へ以下を追記してください（必須）：

### Review Map（必須）
- **変更ファイル一覧**（追加/変更/削除）
- **重要な関数/クラス**（入口から辿れるように）
- **設計判断**（なぜその実装にしたか：2〜5行）
- **リスク/注意点**（skew・係数順序・mask・境界条件など）
- **検証コマンドと結果**（コマンド + 成功ログの要点）

これによりレビュワーは「どこを重点的に見ればいいか」を即座に把握できます。

## 可読性のための実装ルール
- 入口は薄く、処理は `core`（または `stages`）に寄せる
- I/O（shape/型/意味）を docstring か型で明示
- 係数の並び順は `coeff_meta` に必ず記録（比較可能性の要）
- 設定値はログとartifactに残るようにする（後で再現できる）

## “レビュー地獄” を避ける
- 1Taskで変更範囲を広げすぎない（Acceptanceが達成できる最小単位）
- 大規模リファクタは RFC/ADR を起票し、段階的に進める（work/templates参照）
